## 11회차 | Next.js 심화(2) 답변 정리 (코드 스플리팅, Dynamic Import, Hydration, Server Actions)

> 📅 날짜: 2025-09-22 (월) <br/>
> 📚 주제: Next.js 심화(2) 질문 (코드 스플리팅, Dynamic Import, Hydration, Server Actions)

<br/>

### ✅ 면접 질문 리스트

### 기본 개념

**1. 코드 스플리팅(Code Splitting)은 무엇이며, Next.js에서는 어떤 방식으로 적용할 수 있나요?**

**코드 스플리팅**은 **코드를 여러 조각(청크)로 분리해서 필요한 시점에 필요한 코드만 로드**하는 기법입니다.

초기 로딩 속도를 개선하고, 불필요한 리소스를 줄일 수 있습니다.

<br/>

Next.js는 기본적으로 **코드 스플리팅을 페이지 단위로 자동으로 적용**합니다.

그리고 **`next/dynamic` 모듈을 사용**하면, 특정 컴포넌트를 필요한 시점에만 불러오는 **Dynamic Import**를 구현할 수 있어서 수동으로 코드 스플리팅을 적용할 수 있습니다.

<br/><br/>

**2. Dynamic Import를 사용하는 이유는 무엇인가요?**

**Dynamic Import**는 **컴포넌트를 지연 로딩(lazy loading)하기 위해 사용**합니다.

특정 컴포넌트나 라이브러리를 **필요한 시점**에만 불러와서 애플리케이션의 **초기 번들 사이즈를 줄이기 위해** 사용합니다.

초기 번들 크기를 줄이면 **초기 로딩 속도 최적화**할 수 있고, 차트나 모달 같은 **무거운 UI**를 필요한 시점에만 불러오게 할 수 있습니다.

<br/>

- **Dynamic Import**: 자바스크립트의 `import()` 문법을 활용해서 **코드를 실행 시점에 동적으로 불러오는 기능**
  - 일반적인 자바스크립트 모듈: `import` 키워드를 사용해서 모듈들은 애플리케이션 시작 시 한꺼번에 불러옴
  - 다이나믹 임포트: `import()` 함수를 사용해서 특정 조건이나 사용자 상호작용이 있을 때만 해당 모듈을 불러옴

<br/><br/>

**3. Hydration이란 무엇이며, CSR과 어떤 관계가 있나요?**

**Hydration**은 서버에서 생성된 **정적 HTML에 자바스크립트 코드를 연결**하여 **이벤트 핸들러나 state 같은 동적인 기능(인터렉션)이 가능하게 만드는 과정**입니다.

**CSR**은 처음부터 빈 HTML에 자바스크립트로 화면을 그리기 때문에 **하이드레이션 과정이 없습니다.**

반면, **SSR이나 SSG는** 서버에서 HTML을 미리 보내주기 때문에 이후 사용자 인터랙션을 위해 이 정적인 HTML을 동적인 React 컴포넌트로 만드는 **하이드레이션 과정이 필수적입니다.**

<br/><br/>

**4. Next.js에서 이미지 최적화(Image Optimization)는 어떻게 이루어지나요?**

Next.js는 **`<Image>` 컴포넌트**를 통해 이미지 최적화를 지원합니다.

이 컴포넌트는 요청이 들어오면 이미지를 **뷰포트 크기에 맞게** 동적으로 크기를 조절하고, **WebP**와 같은 최신 이미지 포맷으로 변환합니다.

또한, **지연 로딩(Lazy Loading)을 기본으로 적용**해서 이미지가 뷰포트 안에 들어올 때만 로드하고, 이미지 로딩 중에도 레이아웃이 밀리는 **Layout Shift 현상을 방지**합니다.

<br/><br/>

**5. Next.js의 Head 컴포넌트는 어떤 역할을 하나요?**

**`<Head>` 컴포넌트**는 **HTML 문서의 `<head>` 태그에 해당하는 정보를 동적으로 관리**하는 데 사용됩니다.

페이지의 **제목(title)**, **메타 태그(meta tags)**, **뷰포트 설정**, **외부 CSS** 등을 페이지마다 다르게 설정할 수 있습니다.

이를 통해 페이지 별로 메타데이터와 SEO를 쉽게 관리할 수 있고, open graph 태그(소셜 미디어 공유 시 미리보기 이미지 설정)를 설정할 수 있습니다.

<br/><br/>

**6. Middleware는 어떤 상황에서 사용되며, 내부적으로 어떻게 동작하나요?**

**Middleware**는 **사용자의 요청이 완료된 페이지에 도달하기 전에 실행되는 코드**입니다.

- **요청(Request)과 응답(Response) 사이에서 실행되는 코드**

주로 **사용자 인증 및 권한 확인**, **페이지 리디렉션**, **A/B 테스트**와 같은 상황에서 사용됩니다.

<br/>

내부적으로는 **`_middleware.js` 파일에 정의된 함수**가 사용자의 요청을 가로채고, 원하는 로직을 수행한 뒤 `NextResponse`를 반환하여 다음 단계로 요청을 넘기거나 다른 페이지로 리디렉션합니다.

<br/><br/>

**7. Next.js에서 환경 변수는 어떤 방식으로 관리하고 사용할 수 있나요?**

Next.js에서 **환경 변수는 `.env` 파일**에 저장하여 관리합니다.

**개발 환경(`.env.development.local`)과 운영 환경(`.env.production.local`)에 따라 다른 변수를 설정**할 수 있습니다.

기본적으로는 **서버 측에서 접근**할 수 있고, **클라이언트 측에서 접근하고 싶으면 변수에 `NEXT_PUBLIC_` 접두사**를 붙여야 합니다.

민감한 정보(DB 연결, API 키 등)는 `NEXT_PUBLIC_`을 붙이지 않고 서버 전용으로 관리해야 합니다.

<br/><br/>

**8. `next.config.js` 파일은 어떤 역할을 하나요?**

`next.config.js` 파일은 Next.js 애플리케이션의 **전역 설정 파일**입니다.

이 파일을 통해 **경로 리디렉션(redirects) 설정**, **헤더 설정(headers)**, **이미지 도메인 허용** 등의 Next.js 기본 동작을 확장하거나 제어할 수 있습니다.

<br/><br/>

**9. Next.js에서 다국어(i18n) 지원은 어떻게 구현할 수 있나요?**

**Next.js는 `next.config.js` 파일에서 다국어 지원(`i18n`) 옵션을 설정**할 수 있습니다.

`locales` 옵션에 지원할 언어 목록을 정의하고, `defaultLocale` 옵션으로 기본 언어를 설정합니다.

이 다국어 지원 옵션을 설정하면, Next.js가 자동으로 **경로 기반 다국어 라우팅**을 처리하며, `next/router`의 `locale` 속성을 통해 현재 언어 정보를 얻을 수 있습니다.

<br/><br/>

**10. Server Actions 기능은 무엇이며, 어떤 장점을 가지고 있나요?**

**Server Actions**는 서버에서 직접 **데이터 처리(mutation)** 작업을 수행할 수 있는 기능입니다.

서버 컴포넌트나 클라이언트 컴포넌트에서 모두 사용 가능하고, 주로 **폼(form) 제출**이나 **데이터 변경** 같은 작업에 사용합니다.

서버 액션은 **파일 최상단이나 비동기 함수 내부에 `"use server"` 지시어를 작성**해서 사용합니다.

이 지시어를 통해 파일 전체나 부분적으로 함수를 서버에서 실행되도록 지정할 수 있습니다.

<br/>

**장점**

- 별도의 API 엔드포인트 없이도 서버 로직 작성 가능
- DB 액세스, 인증 처리 등 보안에 민감한 로직을 클라이언트에 노출하지 않음

**주의점**

- 모든 경우의 API 라우트를 대체할 수 있는 것은 아니기 때문에 복잡한 서버 통신에는 여전히 API 라우트가 필요할 수 있음

<br/>
